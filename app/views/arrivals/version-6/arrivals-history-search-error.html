{% extends "layout.html" %}

{% block pageTitle %}
Arrival notifications {{ data['pageTitleAddOn' ]}}
{% endblock %}


{% block content %}

<div class="govuk-grid-row">
  <div class="govuk-grid-column-full">

    <div class="govuk-error-summary" aria-labelledby="error-summary-title" role="alert" tabindex="-1" data-module="govuk-error-summary">
      <h2 class="govuk-error-summary__title" id="error-summary-title">
        There is a problem
      </h2>
      <div class="govuk-error-summary__body">
        <ul class="govuk-list govuk-error-summary__list">
          <li>
            <a href="#passport-issued-error">Enter a movement reference number</a>
          </li>
        </ul>
      </div>
    </div>

    <h1 class="govuk-heading-xl">
      Arrival notifications
    </h1>

    <p class="govuk-body"><a href="movement-reference">Make an arrival notification</a></p>

    <br><br>

    <form class="form" method="post" action="arrivals-history-search-route">

      <div class="govuk-form-group govuk-form-group--error">
        <h2 class="govuk-label-wrapper"><label class="govuk-label govuk-label--m" for="notificationSearch">
          Search by movement reference number
        </label>
        </h2>
        <span id="notificationSearch-error" class="govuk-error-message">
          <span class="govuk-visually-hidden">Error:</span> Enter a movement reference number
        </span>
        <input class="govuk-input govuk-input--error" style="width:50%" id="notificationSearch" name="notificationSearch" type="text" aria-describedby="notificationSearch-hint notificationSearch-error">
        <button class="govuk-button" data-module="govuk-button">Search</button>
      </div>
      
        </fieldset>
      </div>

    </form>

    {# {
          "updated": "10:50am",
          "mrn": data['movementReferenceReject'],
          "status": "Arrival notification rejected",
          "actions": ["mrnDuplicate", "history"]
        }, #}

    {%
      set feb19 = [
        {
          "updated": "11:03am",
          "mrn": "20GB000060100C06E0",
          "status": "Goods released",
          "actions": ["historyReleased"]
        },
        
        {
          "updated": "10:35am",
          "mrn": "	20GB080360100C06F8",
          "status": "Arrival notification rejected",
          "actions": ["mrnInvalid", "history"]
        },
        {
          "updated": "8:30am",
          "mrn": "LS20090910MRN0001654",
          "status": "Arrival notification rejected",
          "actions": ["mrnUnknown", "history"]
        },
        {
          "updated": "7:19am",
          "mrn": "20IT02130010005402",
          "status": "Arrival notification rejected",
          "actions": ["outOfSequence", "history"]
        }
      ]
    %}

    <h2 class="govuk-heading-m">{{ data['tableOneDate'] }}</h2>

    <table class="govuk-table hmrc-responsive-table" role="table">
      <caption class="govuk-visually-hidden">{{ data['tableOneDate'] }}</caption>
      <thead role="rowgroup">
        <tr role="row">
          <th class="govuk-table__header" scope="col" role="columnheader">Updated</th>
          <th class="govuk-table__header u--w-15" scope="col" role="columnheader">Movement reference number</th>
          {# <th class="govuk-table__header" scope="col" role="columnheader">Trader name</th>
          <th class="govuk-table__header" scope="col" role="columnheader">Location</th>
          <th class="govuk-table__header" scope="col" role="columnheader">Procedure</th> #}
          <th class="govuk-table__header" scope="col" role="columnheader">Status</th>
          <th class="govuk-table__header u--w-10" scope="col" role="columnheader">Action</th>
        </tr>
      </thead>
      <tbody>

        {% if (data['where-are-the-goods'] == "AuthorisedConsignee") %}
          <tr role="row">
            <td class="govuk-table__cell" role="cell"><span class="hmrc-responsive-table__heading" aria-hidden="true">Updated</span>{{ data['arrivalSentTime']}}</td>
            <td class="govuk-table__cell u--w-15" role="cell"><span class="hmrc-responsive-table__heading" aria-hidden="true">Movement reference number</span>{{ data['movement-reference'] }}</td>
            {# <td class="govuk-table__cell" role="cell"><span class="hmrc-responsive-table__heading" aria-hidden="true">Trader name</span>{{ data['consignee-name'] }}</td>
            <td class="govuk-table__cell" role="cell"><span class="hmrc-responsive-table__heading" aria-hidden="true">Location</span><span class="hmrc-responsive-table__value">{{ data['authorised-location-code'] }}</span></td>
            <td class="govuk-table__cell" role="cell"><span class="hmrc-responsive-table__heading" aria-hidden="true">Procedure</span>Simplified</td> #}
            <td class="govuk-table__cell" role="cell"><span class="hmrc-responsive-table__heading" aria-hidden="true">Status</span>Arrival notification sent</td>
            <td class="govuk-table__cell" role="cell">
              <span class="hmrc-responsive-table__heading" aria-hidden="true">Action</span>
                <ul class="govuk-list">
                  {# <li>
                    <a href="../../unloading-remarks/version-6/seals-included/all-goods-unloaded">Make unloading remarks<span class="govuk-visually-hidden"> for MRN</span></a>
                  </li> #}
                  <li>
                    <a href="history/view-history-notification-sent">View history<span class="govuk-visually-hidden"> for {{ data['movement-reference'] }}</span> </a>
                  </li>
                </ul>
            </td>
          </tr>
        {% endif %}

        {% for notice in feb19 %}
          <tr role="row">
            <td class="govuk-table__cell" role="cell"><span class="hmrc-responsive-table__heading" aria-hidden="true">Updated</span>{{ notice.updated }}</td>
            <td class="govuk-table__cell u--w-15" role="cell"><span class="hmrc-responsive-table__heading" aria-hidden="true">Movement reference number</span><span class="hmrc-responsive-table__value">{{ notice.mrn }}</span></td>
            {# <td class="govuk-table__cell" role="cell"><span class="hmrc-responsive-table__heading" aria-hidden="true">Trader name</span>{{ notice.trader | safe }}</td>
            <td class="govuk-table__cell" role="cell"><span class="hmrc-responsive-table__heading" aria-hidden="true">Location</span><span class="hmrc-responsive-table__value">{{ notice.office }}</span></td>
            <td class="govuk-table__cell" role="cell"><span class="hmrc-responsive-table__heading" aria-hidden="true">Procedure</span>{{ notice.procedure }}</td> #}
            <td class="govuk-table__cell" role="cell"><span class="hmrc-responsive-table__heading" aria-hidden="true">Status</span>{{ notice.status }}</td>
            <td class="govuk-table__cell u--w-10" role="cell">
              <span class="hmrc-responsive-table__heading" aria-hidden="true">Action</span>
              {% if notice.actions.length > 0 %}
                <ul class="govuk-list">
              {% else %}
                <div>
              {% endif %}

              {% for action in notice.actions %}
                {% if notice.actions.length > 0 %}<li>{% endif %}
                {% if action == "mrnDuplicate" %}
                  <a href="rejected-arrivals/mrn-duplicate">View and fix errors<span class="govuk-visually-hidden"> for {{ notice.mrn }}</span></a>
                {% endif %}
                {% if action == "mrnInvalid" %}
                  <a href="rejected-arrivals/mrn-invalid">View and fix errors<span class="govuk-visually-hidden"> for {{ notice.mrn }}</span></a>
                {% endif %}
                {% if action == "mrnUnknown" %}
                  <a href="rejected-arrivals/mrn-unknown">View and fix errors<span class="govuk-visually-hidden"> for {{ notice.mrn }}</span></a>
                {% endif %}
                {% if action == "history" %}
                  <a href="history/view-history-rejected.html">View history<span class="govuk-visually-hidden"> for {{ notice.mrn }}</span> </a>
                {% endif %}
                {% if action == "historyReleased" %}
                  <a href="history/view-history-released.html">View history<span class="govuk-visually-hidden"> for {{ notice.mrn }}</span> </a>
                {% endif %}
                {% if action == "unloading" %}
                  <a href="#">Make unloading remarks<span class="govuk-visually-hidden"> for {{ notice.mrn }}</span></a>
                {% endif %}
                {% if action == "outOfSequence" %}
                  <a href="rejected-arrivals/message-out-of-sequence">View and fix errors<span class="govuk-visually-hidden"> for {{ notice.mrn }}</span></a>
                {% endif %}
                {% if notice.actions.length > 0 %}</li>{% endif %}
              {% endfor %}

              {% if notice.actions | length > 0 %}
                </ul>
              {% else %}
                </div>
              {% endif %}
            </td>
          </tr>
        {% endfor %}
      </tbody>
    </table>


    <h2 class="govuk-heading-m govuk-!-margin-top-6">{{ data['tableTwoDate'] }}</h2>

    {%
      set feb18 = [
        {
          "updated": "5.39pm",
          "mrn": "20DK0004601366B740",
          "status": "Arrival notification rejected",
          "actions": ["errors","history"]
        },
        {
          "updated": "12:39pm",
          "mrn": "20IT02140015005333",
          "status": "Arrival notification rejected",
          "actions": ["errors","history"]
        }
      ]
    %}


    <table class="govuk-table hmrc-responsive-table" role="table">
      <caption class="govuk-visually-hidden">{{ data['tableTwoDate'] }}</caption>
      <thead role="rowgroup">
        <tr role="row">
          <th class="govuk-table__header" scope="col" role="columnheader">Updated</th>
          <th class="govuk-table__header" scope="col" role="columnheader">Movement reference number</th>
          {# <th class="govuk-table__header" scope="col" role="columnheader">Trader name</th>
          <th class="govuk-table__header" scope="col" role="columnheader">Location</th>
          <th class="govuk-table__header" scope="col" role="columnheader">Procedure</th> #}
          <th class="govuk-table__header" scope="col" role="columnheader">Status</th>
          <th class="govuk-table__header u--w-10" scope="col" role="columnheader">Action</th>
        </tr>
      </thead>
      <tbody>
        {% for notice in feb18 %}
          <tr role="row">
            <td class="govuk-table__cell" role="cell"><span class="hmrc-responsive-table__heading" aria-hidden="true">Updated</span>{{ notice.updated }}</td>
            <td class="govuk-table__cell" role="cell"><span class="hmrc-responsive-table__heading" aria-hidden="true">Movement reference number</span><span class="hmrc-responsive-table__value">{{ notice.mrn }}</span></td>
            {# <td class="govuk-table__cell" role="cell"><span class="hmrc-responsive-table__heading" aria-hidden="true">Trader name</span>{{ notice.trader | safe }}</td>
            <td class="govuk-table__cell" role="cell"><span class="hmrc-responsive-table__heading" aria-hidden="true">Location</span><span class="hmrc-responsive-table__value">{{ notice.office }}</span></td>
            <td class="govuk-table__cell" role="cell"><span class="hmrc-responsive-table__heading" aria-hidden="true">Procedure</span>{{ notice.procedure }}</td> #}
            <td class="govuk-table__cell" role="cell"><span class="hmrc-responsive-table__heading" aria-hidden="true">Status</span>{{ notice.status }}</td>
            <td class="govuk-table__cell u--w-10" role="cell">
              <span class="hmrc-responsive-table__heading" aria-hidden="true">Action</span>
              {% if notice.actions.length > 0 %}
                <ul class="govuk-list">
              {% else %}
                <div>
              {% endif %}

              {% for action in notice.actions %}
                {% if notice.actions.length > 0 %}<li>{% endif %}
                {% if action == "errors" %}
                  <a href="rejected-arrivals/mrn-duplicate">View and fix errors<span class="govuk-visually-hidden"> for {{ notice.mrn }}</span></a>
                {% endif %}
                {% if action == "history" %}
                  <a href="view-history.html">View history<span class="govuk-visually-hidden"> for {{ notice.mrn }}</span> </a>
                {% endif %}
                {% if action == "unloading" %}
                  <a href="../../unloading-remarks/version-5/seals-included/all-goods-unloaded">Make unloading remarks<span class="govuk-visually-hidden"> for {{ notice.mrn }}</span></a>
                {% endif %}
                {% if notice.actions.length > 0 %}</li>{% endif %}
              {% endfor %}

              {% if notice.actions | length > 0 %}
                </ul>
              {% else %}
                </div>
              {% endif %}
            </td>
          </tr>
        {% endfor %}
      </tbody>
    </table>

    <p class="govuk-body govuk-!-margin-top-3"><a href="homepage">Go to manage transit movements</a></p>

  </div>
</div>



{% endblock %}
